---
title: "R Notebook"
output:
  html_document:
    df_print: paged
---
```{r}
library(tidyverse)
library(data.table)
library(readr)
library(sf)
library(mapdeck)
library(colourvalues)
library(geobr)
library(moveVis)
```

```{r}
token = "pk.eyJ1IjoicGVkcm9jYXBldHRpIiwiYSI6ImNqOXlienlvNzIweTIzMnBjYW03ZTZtdjkifQ.4GbB0s_XHX8wQumm-nbQEQ"

destino <- fread("C:/Users/pedro/Documents/pedro/final_abril.csv")
destino$distancia <- round(destino$distancia, 0)

```

```{r}
estados <- geobr::read_state(code_state = "all",
                             year = 2010)

f <- mapdeck(token = token, 
        style = mapdeck_style("dark"), 
        pitch = 0) %>%
  add_sf(
    data = estados
    , layer_id = "limites_estados"
    , fill_opacity = 0
    , stroke_colour = "#ffffff75"
    , stroke_width = 7000
  ) %>%
  add_animated_arc(
    data = destino %>%
      filter(distancia > 0)
    , origin = c("long_o", "lat_o")
    , destination = c("long_d", "lat_d")
    , stroke_to = "stroke"
    , stroke_from = "stroke"
    , stroke_width = "stroke"
    , animation_speed = 4
    , auto_highlight = F
    , palette = "heat"
  )

f
```

